<!DOCTYPE html>
<html>
  <head>
    <title>Neutron Quality of Service, new features and future roadmap</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <textarea id="source">

class: center, middle

# Neutron Quality of Service, new features and future roadmap

---

# Agenda

1. The RBAC functionality in Mitaka
2. QoS in Liberty - reminder
3. Bandwidth limit for Linuxbridge agent
4. DSCP functionality in Neuton
5. The possibilities for the future.

---
class: center

# QoS in Liberty

## Egress bandwidth limit for:

* Openvswitch L2 agent
* SR-IOV L2 agent

???

In Liberty:
* QoS only with one rule type: egress traffic limiting
* implementation only for ovs and SR-IOV L2 agents.

---
class: center

# Egress bandwidth limit rule:

1. Create policy
```
neutron qos-policy-create example-policy
```
2. Create bandwidth limit rule:
```
neutron qos-bandwidth-limit-rule-create \
    --max-kbps 512 \
    --max-burst 1024 \
    example-policy
```
3. Apply policy for port/network
```
neutron port-update 071e54ad-d5f5-402f-933f-dece0db3afde \
    --qos-policy example-policy
```

???

Create bandwith limit (EGRESS) require steps like on slide.

---
name: qos_bw_limit_ovs
class: center

# Apply egress bandwidth limit rule in Openvswitch agent

```
ovs-vsctl set Interface tap1 ingress_policing_rate=512
ovs-vsctl set Interface tap1 ingress_policing_burst=1024
```

![OVS Bridge connection](images/OVS_Bridge_connection.png)


???
In Liberty BW Limit rule could be applied by Openvswitch and SR-IOV agent.
Example: OVS agent makes it like on slide

---

name: qos_linuxbridge_support_1
class: center

# Egress bandwidth limit in Mitaka

## support for linuxbridge l2 agent

![Linuxbridge agent support arrived](images/Agent-arrived.jpg)


???
In Mitaka support for egress bw limit for linuxbridge agent.
From user POV same as for OVS agent (policy, rule, apply rule to port/network)
Implementation details on next slide...

---

name: qos_linuxbridge_details_1
class: center

# Linuxbridge agent details

* Linuxbridge agent use tc (traffic control) Linux tool
* policing on ingress qdisc (queueing discipline)
* Token Bucket Filter used on ingress qdisc

![Egress traffic explanation](images/Egress_traffic.png)

???
- Using basic Linux tool tc to apply qos rules
- qdisc is short for 'queueing discipline' and it is elementary to under-
  standing traffic control. Whenever the kernel needs to send a packet to
  an  interface,  it  is enqueued to the qdisc configured for that inter-
  face. Immediately afterwards, the kernel tries to get as  many  packets
  as  possible  from  the  qdisc,  for giving them to the network adaptor
  driver. (from tc manpage)
- using ingress qdisc because it is treated from bridge POV. So from VM it will
  be egress traffic

---

# Example with Linuxbridge agent:

---

# New config options for Linuxbridge agent:

* kernel_hz value
* latency for tc

---

# Side effect:

Support for l2 extension drivers in linuxbridge agent (qos is first such
extension for linuxbridge agent)

    </textarea>
    <script src="remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create();
    </script>
  </body>
</html>
